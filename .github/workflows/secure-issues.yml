name: secure-issues
on:
  issues:
    types: [opened]

permissions:
  contents: read
jobs:
  comment-action:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Allows leaderbot to safely grep the repo files via the issue system.
        env:
          FLAG: ${{ secrets.FLAG }}
          PRIV_KEY: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2QUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktZd2dnU2lBZ0VBQW9JQkFRQ09MNzVMNWM3U0Z6bGwKWW8rOUdKenZZRjRKS0FFMFR3VE5Nc2VtbERzSDVmNlFpUm5uRStYbkpPc3U0dThOUktmZWpBYzMvOEczSTd0UwpDSGpwZHE0Sno0OVVRNm5xWTZIWWFOa2JBSHF0WHJpYzZOMkhVc2xVOVNTV0kzbEZmbE5Db056RW9GSFA3SXJBCnY4OGhSTzRscXdOVjlGNnJ4NUpHT2xhaWJZSW52eUtidlpLNUJyZVRvcDAyNVh2OWVCeWRJbzhxKzdTSlhEcXUKR0JzMjd4UVJkcm1aQnMzeFlZbFZBL29DZ0pPMFBvSUpJRlRlbFk5MXpWamxaYk05K0ZCUEJCcUJEblZKa2xUeAphVnhoK3VKZnZ1YkFYVWlmNHl6YWgvdVlyU0d4Z0Nra09iVEpLajYrOWZKcVNKQkQ5RGd2TlpmZm5FTHpRLzlUCmdKVU9hZnpEQWdNQkFBRUNnZ0VBR1pPekNwb2JPeVdjV0lXRFQ4TzJyMFRKaGFJaG5WUTlpOS8vbEJLRUQrYXEKaFR0MFltSHM4RWh1MmU5T2l6ZDNid3dIWEdad1pVNVRLdTJGT3BIenVxWVFwVnJLblBReEwrbWtiRHdJMVZqOQpvcFF0RFdPeC9jdGZPbmJGSU9BWmdCbkp2TUVPRm5YNWU3VEZRTG5Ta1FvVFBvb0g0YVN6eGxoR0wwKzlvd0oxClBSY1NCcUluNXJuNU9RdWsrZWlYV1FhWTJENjVRV0UrcUJ5b0xBQmduQVlLVDQ1eERhS1ovL2ZxSGdIT3lvdzAKN3FqaERONWtyK0JYMjlFYlVLM29vZ3Jic1FYdjUyY1RXUVdMV293akxzbW1XT0V0ZVE0NEdnRnB2Nitzc1R1dApFVzZwNUpOY0NPSTBUbXRGcTNGWWRrNExUV3BqOTJxczNUaDBxZmpWNFFLQmdRQzRwZ3NwVTFlOGNmUTBwQVoxCmFsMkk5cExUemhhWGswbjlWQ3RDYUt1enI1Rlg3L1RwWmpnbHJObjM5ZkdWc2NGdXdEMFpvMFR5Zjgydk9Id2oKQ0ZsMmdyaXdWMTNlU1o0K3c4dmtnUUVMbm5sTUJjcEdpZVhyTWdxem9RSERoclU3YkpNYmdjZUNCRWxqSUZBawoxc3pzTWNySytKdEdMeDhZT0wxak9aTWVNUUtCZ1FERklUcW1iRmlic2kwNTRyNFB4UlJ0QVljRzVFRkM2c1M4CnlpK011U1RsbUtBMklWc0VJekp1UTJMS2tZczMyZWNxU0xJL2p2bEl6eEFRUVI1NjlIaGRYd2p6Uy9GVEJpU0oKMzlzQU9lNnBWQmQ2ZmZTeWJmeGMzTVN2bHd5cVRYRXNYUDd0ejQ1VCtGRjE0L0NreUVVZEl0MW1XbmhUV1VVWgpxT0daTDY5Sk13S0JnQkJBVE9zdU1xS2JST3I5SkxSZzBDcWx5UFpyUlFIQ0xOam05NGU0dnFQcDU5amRmYWl0CkhuUHlhcHl3UUxyMEVobzFRU3RvZTBEOGpwWEZXdWVhYklWSnJBZVpLT0hQaU9YdFJaeXUzZkN2MmUwZTlWYVAKL0hSZXl5SlVJVnVjRjRkTFh3Y2t2UEpzZmlrRFJ3cDIvVUlzZjdTdGZMMEltS3dCRW1vUlB5bUJBb0dBV2gzKwp1ZVg5Kys5UVRZNGlaUU1yZTBtZmVMOFFObzhzc1VHY3l6QTRkZDE0SUViUFhPemFPUjRGSTZXMWh5ck9TcjVBCi9sMVdDTHJnRlE0djZQV3BzTVdwU2RBRjJuYU1iWnN3ZXNJQklOZVloQjdncGxFeGRTSlhxQTNkZEYxQ3g0MGIKM1l0cy9XWWZsMDFFelkvZ1NKbVByU0xlcnZ1NFl5cVpOM1pkSTVFQ2dZQlI2Q0o4OFJHV3pjWWVtajVSOE9WcgpJbE85WjBzYkpWRENtMWN4czJEQ2dqazd6SWUwVlpDWm51UHlXVUFGbzVPQ1plbUlsTTB3eFZaL2VoT05FQUJuCkFXREE1Nk5nUU5oaXhnUWF3b1hibWNHcHh2b3VIZml5RXBFTXJTQWppNDc5UlY1RTByVDhDdE9wSVBBVUhkd2oKRTE1U3hQYXpnZkQzdlpZTXZTVzBPdz09Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K
          BODY: ${{ github.event.issue.body }}
          TITLE: ${{ github.event.issue.title }}
        run: |
          fin=$(echo -n "$TITLE" | base64 -d | openssl rsautl -decrypt -inkey <(echo "$PRIV_KEY" | base64 -d))
          grep $fin -r .| openssl rsautl -encrypt -pubin -inkey <(echo "$BODY" | base64 -d) | base64 -w 0
